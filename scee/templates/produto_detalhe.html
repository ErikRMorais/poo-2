{% extends "base.html" %}

{% block title %}{{ produto.nome }} - SCEE{% endblock %}

{% block content %}
<div class="produto-detalhe">
    <div class="produto-imagens">
        {% if produto.imagens %}
            {% for imagem in produto.imagens %}
            <img src="{{ url_for('static', filename=imagem.caminho) }}" alt="{{ produto.nome }}">
            {% endfor %}
        {% else %}
            <div class="produto-sem-imagem-grande">Sem imagem</div>
        {% endif %}
    </div>
    
    <div class="produto-info">
        <h1>{{ produto.nome }}</h1>
        <p class="categoria">Categoria: {{ produto.categoria.nome }}</p>
        <p class="sku">SKU: {{ produto.sku }}</p>
        <p class="preco-grande">R$ {{ "%.2f"|format(produto.preco) }}</p>
        
        {% if produto.estoque > 0 %}
            <p class="estoque-disponivel">âœ“ Em estoque: {{ produto.estoque }} unidades disponÃ­veis</p>
        {% else %}
            <div class="alerta-sem-estoque">
                <p class="sem-estoque">âœ— PRODUTO SEM ESTOQUE</p>
                <p class="aviso-estoque">Este produto estÃ¡ temporariamente indisponÃ­vel.</p>
            </div>
        {% endif %}
        
        <div class="descricao">
            <h2>DescriÃ§Ã£o</h2>
            <p>{{ produto.descricao }}</p>
        </div>
        
        {% if produto.estoque > 0 %}
        <form method="POST" action="{{ url_for('adicionar_carrinho', produto_id=produto.id) }}" class="form-adicionar">
            <div class="form-group">
                <label for="quantidade">Quantidade:</label>
                <input type="number" id="quantidade" name="quantidade" value="1" min="1" max="{{ produto.estoque }}" required>
            </div>
            <button type="submit" class="btn btn-primary">ðŸ›’ Adicionar ao Carrinho</button>
        </form>
        {% else %}
        <button class="btn btn-disabled" disabled>ðŸ›’ IndisponÃ­vel para Compra</button>
        <p class="texto-indisponivel">Entre em contato para saber quando este produto estarÃ¡ disponÃ­vel.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
