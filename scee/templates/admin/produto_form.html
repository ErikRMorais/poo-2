{% extends "base.html" %}

{% block title %}{% if produto %}Editar{% else %}Novo{% endif %} Produto - Admin{% endblock %}

{% block content %}
<h1>{% if produto %}Editar{% else %}Novo{% endif %} Produto</h1>

<form method="POST" enctype="multipart/form-data" class="form">
    <div class="form-group">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" value="{{ produto.nome if produto else '' }}" required>
    </div>
    
    {% if not produto %}
    <div class="form-group">
        <label for="sku">SKU:</label>
        <input type="text" id="sku" name="sku" required>
    </div>
    {% endif %}
    
    <div class="form-group">
        <label for="descricao">Descrição:</label>
        <textarea id="descricao" name="descricao" rows="5" required>{{ produto.descricao if produto else '' }}</textarea>
    </div>
    
    <div class="form-group">
        <label for="preco">Preço:</label>
        <input type="number" id="preco" name="preco" step="0.01" min="0.01" value="{{ produto.preco if produto else '' }}" required>
    </div>
    
    <div class="form-group">
        <label for="estoque">Estoque:</label>
        <input type="number" id="estoque" name="estoque" min="0" value="{{ produto.estoque if produto else '0' }}" required>
    </div>
    
    <div class="form-group">
        <label for="categoria_id">Categoria:</label>
        <select id="categoria_id" name="categoria_id" required>
            {% for categoria in categorias %}
            <option value="{{ categoria.id }}" {% if produto and produto.categoria_id == categoria.id %}selected{% endif %}>
                {{ categoria.nome }}
            </option>
            {% endfor %}
        </select>
    </div>
    
    {% if not produto %}
    <div class="form-group">
        <label for="imagens">Imagens (máx. 5, 2MB cada):</label>
        <input type="file" id="imagens" name="imagens" accept="image/jpeg,image/png" multiple>
    </div>
    {% endif %}
    
    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="{{ url_for('admin_produtos') }}" class="btn">Cancelar</a>
</form>
{% endblock %}
